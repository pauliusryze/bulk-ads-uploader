{"ast":null,"code":"// Facebook Marketing API Client\n\nclass FacebookAPIClient {\n  constructor(config) {\n    this.config = void 0;\n    this.baseUrl = 'https://graph.facebook.com/v18.0';\n    this.config = config;\n  }\n  async request(endpoint, options = {}) {\n    const url = `${this.baseUrl}${endpoint}`;\n    const params = new URLSearchParams({\n      access_token: this.config.accessToken\n    });\n    const response = await fetch(`${url}?${params}`, {\n      ...options,\n      headers: {\n        'Content-Type': 'application/json',\n        ...options.headers\n      }\n    });\n    if (!response.ok) {\n      const error = await response.json();\n      throw new Error(error.error.message);\n    }\n    return response.json();\n  }\n\n  // Get user's ad accounts\n  async getAdAccounts() {\n    return this.request(`/me/adaccounts`);\n  }\n\n  // Get user's pages\n  async getPages() {\n    return this.request(`/me/accounts`);\n  }\n\n  // Get custom audiences for ad account\n  async getCustomAudiences(adAccountId) {\n    return this.request(`/${adAccountId}/customaudiences`);\n  }\n\n  // Upload media to Facebook\n  async uploadMedia(adAccountId, file) {\n    const formData = new FormData();\n    formData.append('source', file);\n    formData.append('access_token', this.config.accessToken);\n    const response = await fetch(`${this.baseUrl}/${adAccountId}/adimages`, {\n      method: 'POST',\n      body: formData\n    });\n    if (!response.ok) {\n      const error = await response.json();\n      throw new Error(error.error.message);\n    }\n    return response.json();\n  }\n\n  // Create campaign\n  async createCampaign(adAccountId, data) {\n    return this.request(`/${adAccountId}/campaigns`, {\n      method: 'POST',\n      body: JSON.stringify(data)\n    });\n  }\n\n  // Create ad set\n  async createAdSet(adAccountId, data) {\n    return this.request(`/${adAccountId}/adsets`, {\n      method: 'POST',\n      body: JSON.stringify(data)\n    });\n  }\n\n  // Create ad creative\n  async createAdCreative(adAccountId, data) {\n    return this.request(`/${adAccountId}/adcreatives`, {\n      method: 'POST',\n      body: JSON.stringify(data)\n    });\n  }\n\n  // Create ad\n  async createAd(adAccountId, data) {\n    return this.request(`/${adAccountId}/ads`, {\n      method: 'POST',\n      body: JSON.stringify(data)\n    });\n  }\n\n  // Generate ad preview\n  async generateAdPreview(adAccountId, creativeSpec, adFormat) {\n    return this.request(`/${adAccountId}/generatepreviews`, {\n      method: 'POST',\n      body: JSON.stringify({\n        creative: creativeSpec,\n        ad_format: adFormat\n      })\n    });\n  }\n\n  // Get ad preview by ad ID\n  async getAdPreview(adId) {\n    return this.request(`/${adId}/previews`);\n  }\n\n  // Update ad status\n  async updateAdStatus(adId, status) {\n    await this.request(`/${adId}`, {\n      method: 'POST',\n      body: JSON.stringify({\n        status\n      })\n    });\n  }\n\n  // Delete ad\n  async deleteAd(adId) {\n    await this.request(`/${adId}`, {\n      method: 'DELETE'\n    });\n  }\n}\nexport default FacebookAPIClient;","map":{"version":3,"names":["FacebookAPIClient","constructor","config","baseUrl","request","endpoint","options","url","params","URLSearchParams","access_token","accessToken","response","fetch","headers","ok","error","json","Error","message","getAdAccounts","getPages","getCustomAudiences","adAccountId","uploadMedia","file","formData","FormData","append","method","body","createCampaign","data","JSON","stringify","createAdSet","createAdCreative","createAd","generateAdPreview","creativeSpec","adFormat","creative","ad_format","getAdPreview","adId","updateAdStatus","status","deleteAd"],"sources":["/Users/paulius/Downloads/Projects/Meta Ads Uploader/frontend/src/lib/facebook-api.ts"],"sourcesContent":["// Facebook Marketing API Client\nexport interface FacebookAPIConfig {\n  appId: string;\n  accessToken: string;\n  adAccountId: string;\n  pageId?: string;\n  sandboxMode: boolean;\n}\n\nexport interface FacebookCampaignData {\n  name: string;\n  objective: 'LINK_CLICKS' | 'CONVERSIONS' | 'REACH' | 'BRAND_AWARENESS' | 'VIDEO_VIEWS';\n  status: 'PAUSED' | 'ACTIVE';\n  special_ad_categories?: string[];\n}\n\nexport interface FacebookAdSetData {\n  name: string;\n  campaign_id: string;\n  daily_budget: number;\n  billing_event: 'IMPRESSIONS' | 'LINK_CLICKS';\n  optimization_goal: 'LINK_CLICKS' | 'CONVERSIONS' | 'REACH' | 'BRAND_AWARENESS' | 'VIDEO_VIEWS';\n  targeting: {\n    age_min?: number;\n    age_max?: number;\n    genders?: number[];\n    geo_locations?: {\n      countries?: string[];\n      regions?: string[];\n      cities?: string[];\n    };\n    custom_audiences?: Array<{ id: string }>;\n    interests?: Array<{ id: string }>;\n  };\n  status: 'PAUSED' | 'ACTIVE';\n  bid_amount?: number;\n}\n\nexport interface FacebookCreativeData {\n  name: string;\n  object_story_spec: {\n    page_id: string;\n    link_data?: {\n      message: string;\n      link: string;\n      call_to_action?: {\n        type: 'SHOP_NOW' | 'LEARN_MORE' | 'SIGN_UP' | 'BOOK_NOW' | 'CONTACT_US';\n        value: {\n          link: string;\n        };\n      };\n    };\n    video_data?: {\n      video_id: string;\n      message: string;\n      call_to_action?: {\n        type: 'SHOP_NOW' | 'LEARN_MORE' | 'SIGN_UP' | 'BOOK_NOW' | 'CONTACT_US';\n        value: {\n          link: string;\n        };\n      };\n    };\n  };\n}\n\nexport interface FacebookAdData {\n  name: string;\n  adset_id: string;\n  creative: {\n    creative_id: string;\n  };\n  status: 'PAUSED' | 'ACTIVE';\n}\n\nexport interface FacebookAPIError {\n  error: {\n    code: number;\n    message: string;\n    error_subcode?: number;\n    error_user_title?: string;\n    error_user_msg?: string;\n  };\n}\n\nexport interface FacebookAdAccount {\n  id: string;\n  name: string;\n  currency: string;\n  timezone: string;\n  business_name?: string;\n}\n\nexport interface FacebookPage {\n  id: string;\n  name: string;\n  category: string;\n  access_token: string;\n}\n\nexport interface FacebookCustomAudience {\n  id: string;\n  name: string;\n  subtype: string;\n  approximate_count?: number;\n}\n\nclass FacebookAPIClient {\n  private config: FacebookAPIConfig;\n  private baseUrl = 'https://graph.facebook.com/v18.0';\n\n  constructor(config: FacebookAPIConfig) {\n    this.config = config;\n  }\n\n  private async request<T>(\n    endpoint: string,\n    options: RequestInit = {}\n  ): Promise<T> {\n    const url = `${this.baseUrl}${endpoint}`;\n    const params = new URLSearchParams({\n      access_token: this.config.accessToken,\n    });\n\n    const response = await fetch(`${url}?${params}`, {\n      ...options,\n      headers: {\n        'Content-Type': 'application/json',\n        ...options.headers,\n      },\n    });\n\n    if (!response.ok) {\n      const error: FacebookAPIError = await response.json();\n      throw new Error(error.error.message);\n    }\n\n    return response.json();\n  }\n\n  // Get user's ad accounts\n  async getAdAccounts(): Promise<{ data: FacebookAdAccount[] }> {\n    return this.request(`/me/adaccounts`);\n  }\n\n  // Get user's pages\n  async getPages(): Promise<{ data: FacebookPage[] }> {\n    return this.request(`/me/accounts`);\n  }\n\n  // Get custom audiences for ad account\n  async getCustomAudiences(adAccountId: string): Promise<{ data: FacebookCustomAudience[] }> {\n    return this.request(`/${adAccountId}/customaudiences`);\n  }\n\n  // Upload media to Facebook\n  async uploadMedia(adAccountId: string, file: File): Promise<{ id: string; hash: string }> {\n    const formData = new FormData();\n    formData.append('source', file);\n    formData.append('access_token', this.config.accessToken);\n\n    const response = await fetch(`${this.baseUrl}/${adAccountId}/adimages`, {\n      method: 'POST',\n      body: formData,\n    });\n\n    if (!response.ok) {\n      const error: FacebookAPIError = await response.json();\n      throw new Error(error.error.message);\n    }\n\n    return response.json();\n  }\n\n  // Create campaign\n  async createCampaign(adAccountId: string, data: FacebookCampaignData): Promise<{ id: string }> {\n    return this.request(`/${adAccountId}/campaigns`, {\n      method: 'POST',\n      body: JSON.stringify(data),\n    });\n  }\n\n  // Create ad set\n  async createAdSet(adAccountId: string, data: FacebookAdSetData): Promise<{ id: string }> {\n    return this.request(`/${adAccountId}/adsets`, {\n      method: 'POST',\n      body: JSON.stringify(data),\n    });\n  }\n\n  // Create ad creative\n  async createAdCreative(adAccountId: string, data: FacebookCreativeData): Promise<{ id: string }> {\n    return this.request(`/${adAccountId}/adcreatives`, {\n      method: 'POST',\n      body: JSON.stringify(data),\n    });\n  }\n\n  // Create ad\n  async createAd(adAccountId: string, data: FacebookAdData): Promise<{ id: string }> {\n    return this.request(`/${adAccountId}/ads`, {\n      method: 'POST',\n      body: JSON.stringify(data),\n    });\n  }\n\n  // Generate ad preview\n  async generateAdPreview(adAccountId: string, creativeSpec: any, adFormat: string): Promise<{ body: string }> {\n    return this.request(`/${adAccountId}/generatepreviews`, {\n      method: 'POST',\n      body: JSON.stringify({\n        creative: creativeSpec,\n        ad_format: adFormat,\n      }),\n    });\n  }\n\n  // Get ad preview by ad ID\n  async getAdPreview(adId: string): Promise<{ data: Array<{ body: string }> }> {\n    return this.request(`/${adId}/previews`);\n  }\n\n  // Update ad status\n  async updateAdStatus(adId: string, status: 'PAUSED' | 'ACTIVE'): Promise<void> {\n    await this.request(`/${adId}`, {\n      method: 'POST',\n      body: JSON.stringify({ status }),\n    });\n  }\n\n  // Delete ad\n  async deleteAd(adId: string): Promise<void> {\n    await this.request(`/${adId}`, {\n      method: 'DELETE',\n    });\n  }\n}\n\nexport default FacebookAPIClient; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}